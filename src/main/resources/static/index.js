/*! For license information please see index.js.LICENSE.txt */
layui.extend({setter:"config",admin:"lib/admin",view:"lib/view"}).define(["setter","admin"],(function(e){var a=layui.setter,n=layui.element,i=layui.admin,t=i.tabsPage,l=layui.view,o=function(){var e=layui.router(),r=e.path,y=i.correctRouter(e.path.join("/"));r.length||(r=[""]),""===r[r.length-1]&&(r[r.length-1]=a.entry);var h=function(e){o.haveInit&&c(".layui-layer").each((function(){var e=c(this),a=e.attr("times");e.hasClass("layui-layim")||layer.close(a)})),o.haveInit=!0,c(u).scrollTop(0),delete t.type};if("tab"===t.type&&("/"!==y||"/"===y&&i.tabsBody().html()))return i.tabsBodyChange(t.index),h(t.type);l().render(r.join("/")).then((function(l){var o,r=c("#LAY_app_tabsheader>li");r.each((function(e){c(this).attr("lay-id")===y&&(o=!0,t.index=e)})),a.pageTabs&&"/"!==y&&(o||(c(u).append('<div class="layadmin-tabsbody-item layui-show"></div>'),t.index=r.length,n.tabAdd(s,{title:"<span>"+(l.title||"新标签页")+"</span>",id:y,attr:e.href}))),this.container=i.tabsBody(t.index),a.pageTabs||this.container.scrollTop(0),n.tabChange(s,y),i.tabsBodyChange(t.index)})).done((function(){layui.use("common",layui.cache.callback.common),d.on("resize",layui.data.resize),n.render("breadcrumb","breadcrumb"),i.tabsBody(t.index).on("scroll",(function(){var e=c(this),a=c(".layui-laydate"),n=c(".layui-layer")[0];a[0]&&(a.each((function(){var e=c(this);e.hasClass("layui-laydate-static")||e.remove()})),e.find("input").blur()),n&&layer.closeAll("tips")}))})),h()},r=function(e){var n,t=layui.router(),r=l(a.container),u=i.correctRouter(t.path.join("/"));if(layui.each(a.indPage,(function(e,a){if(u===a)return n=!0})),layui.config({base:a.base+"controller/"}),n||"/user/login"===u)r.render(t.path.join("/")).done((function(){i.pageType="alone"}));else{if(a.interceptor)if(!layui.data(a.tableName)[a.request.tokenName])return location.hash="/user/login/redirect="+encodeURIComponent(u);"console"===i.pageType?o():r.render("layout").done((function(){o(),layui.element.render(),i.screen()<2&&i.sideFlexible(),i.pageType="console"}))}},u="#LAY_app_body",s="layadmin-layout-tabs",c=layui.$,d=c(window);layui.link(a.base+"style/admin.css?v="+i.v+"-1",(function(){r()}),"layuiAdmin"),window.onhashchange=function(){r(),layui.event.call(this,a.MOD_NAME,"hash({*})",layui.router())},layui.each(a.extend,(function(e,n){var i={};i[n]="{/}"+a.base+"lib/extend/"+n,layui.extend(i)})),layui.each(a.commonExtend,(function(e,n){var i={};i[n]="{/}"+a.base+"controller/common/"+n,layui.extend(i)})),e("index",{render:o})}));