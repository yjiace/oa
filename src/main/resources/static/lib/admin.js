/*! For license information please see admin.js.LICENSE.txt */
layui.define("view",(function(e){var a,t=layui.jquery,i=layui.laytpl,n=layui.element,l=layui.setter,s=layui.view,r=layui.device(),o=t(window),u=t("body"),c=t("#"+l.container),d="layui-show",y="layui-this",m="layui-disabled",f="#LAY_app_body",h="LAY_app_flexible",p="layadmin-side-spread-sm",v="layadmin-tabsbody-item",b="layui-icon-shrink-right",g="layui-icon-spread-left",x="layadmin-side-shrink",C={v:"1.2.1 pro",req:s.req,reqAsync:s.reqAsync,exit:s.exit,escape:function(e){return String(e||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},on:function(e,a){return layui.onevent.call(this,l.MOD_NAME,e,a)},popup:s.popup,popupRight:function(e){return C.popup.index=layer.open(t.extend({type:1,id:"LAY_adminPopupR",anim:-1,title:!1,closeBtn:!1,offset:"r",shade:.1,shadeClose:!0,skin:"layui-anim layui-anim-rl layui-layer-adminRight",area:"300px"},e))},sendAuthCode:function(e){var a,i=(e=t.extend({seconds:60,elemPhone:"#LAY_phone",elemVercode:"#LAY_vercode"},e)).seconds,n=function(l){var s=t(e.elem);--i<0?(s.removeClass(m).html("获取验证码"),i=e.seconds,clearInterval(a)):s.addClass(m).html(i+"秒后重获"),l||(a=setInterval((function(){n(!0)}),1e3))};u.off("click",e.elem).on("click",e.elem,(function(){e.elemPhone=t(e.elemPhone),e.elemVercode=t(e.elemVercode);var a=e.elemPhone,l=a.val();if(i===e.seconds&&!t(this).hasClass(m)){if(!/^1\d{10}$/.test(l))return a.focus(),layer.msg("请输入正确的手机号");if("object"==typeof e.ajax){var s=e.ajax.success;delete e.ajax.success}C.req(t.extend(!0,{url:"/auth/code",type:"get",data:{phone:l},success:function(a){layer.msg("验证码已发送至你的手机，请注意查收",{icon:1,shade:0}),e.elemVercode.focus(),n(),s&&s(a)}},e.ajax))}}))},screen:function(){var e=o.width();return e>1200?3:e>992?2:e>768?1:0},sideFlexible:function(e){var a=c,i=t("#"+h),n=C.screen();"spread"===e?(i.removeClass(g).addClass(b),n<2?a.addClass(p):a.removeClass(p),a.removeClass(x)):(i.removeClass(b).addClass(g),n<2?a.removeClass(x):a.addClass(x),a.removeClass(p)),layui.event.call(this,l.MOD_NAME,"side({*})",{status:e})},resizeTable:function(e){var a=this,i=function(){a.tabsBody(C.tabsPage.index).find(".layui-table-view").each((function(){var e=t(this).attr("lay-id");layui.table.resize(e)}))};layui.table&&(e?setTimeout(i,e):i())},theme:function(e){l.theme;var a=layui.data(l.tableName),n="LAY_layadmin_theme",s=document.createElement("style"),r=i([".layui-side-menu,",".layadmin-pagetabs .layui-tab-title li:after,",".layadmin-pagetabs .layui-tab-title li.layui-this:after,",".layui-layer-admin .layui-layer-title,",".layadmin-side-shrink .layui-side-menu .layui-nav>.layui-nav-item>.layui-nav-child","{background-color:{{d.color.main}} !important;}",".layui-nav-tree .layui-this,",".layui-nav-tree .layui-this>a,",".layui-nav-tree .layui-nav-child dd.layui-this,",".layui-nav-tree .layui-nav-child dd.layui-this a","{background-color:{{d.color.selected}} !important;}",".layui-layout-admin .layui-logo{background-color:{{d.color.logo || d.color.main}} !important;}","{{# if(d.color.header){ }}",".layui-layout-admin .layui-header{background-color:{{ d.color.header }};}",".layui-layout-admin .layui-header a,",".layui-layout-admin .layui-header a cite{color: #f8f8f8;}",".layui-layout-admin .layui-header a:hover{color: #fff;}",".layui-layout-admin .layui-header .layui-nav .layui-nav-more{border-top-color: #fbfbfb;}",".layui-layout-admin .layui-header .layui-nav .layui-nav-mored{border-color: transparent; border-bottom-color: #fbfbfb;}",".layui-layout-admin .layui-header .layui-nav .layui-this:after, .layui-layout-admin .layui-header .layui-nav-bar{background-color: #fff; background-color: rgba(255,255,255,.5);}",".layadmin-pagetabs .layui-tab-title li:after{display: none;}","{{# } }}"].join("")).render(e=t.extend({},a.theme,e)),o=document.getElementById(n);"styleSheet"in s?(s.setAttribute("type","text/css"),s.styleSheet.cssText=r):s.innerHTML=r,s.id=n,o&&u[0].removeChild(o),u[0].appendChild(s),u.attr("layadmin-themealias",e.color.alias),a.theme=a.theme||{},layui.each(e,(function(e,t){a.theme[e]=t})),layui.data(l.tableName,{key:"theme",value:a.theme})},initTheme:function(e){var a=l.theme;e=e||0,a.color[e]&&(a.color[e].index=e,C.theme({color:a.color[e]}))},tabsPage:{},tabsHeader:function(e){return t("#LAY_app_tabsheader").children("li").eq(e||0)},tabsBody:function(e){return t(f).find("."+v).eq(e||0)},tabsBodyChange:function(e){C.tabsHeader(e).attr("lay-attr",layui.router().href),C.tabsBody(e).addClass(d).siblings().removeClass(d),k.rollPage("auto",e)},resize:function(e){var a=layui.router().path.join("-");C.resizeFn[a]&&(o.off("resize",C.resizeFn[a]),delete C.resizeFn[a]),"off"!==e&&(e(),C.resizeFn[a]=e,o.on("resize",C.resizeFn[a]))},resizeFn:{},runResize:function(){var e=layui.router().path.join("-");C.resizeFn[e]&&C.resizeFn[e]()},delResize:function(){this.resize("off")},closeThisTabs:function(){C.tabsPage.index&&t(z).eq(C.tabsPage.index).find(".layui-tab-close").trigger("click")},fullScreen:function(){var e=document.documentElement,a=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;void 0!==a&&a&&a.call(e)},exitScreen:function(){document.documentElement;document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},correctRouter:function(e){return/^\//.test(e)||(e="/"+e),e.replace(/^(\/+)/,"/").replace(new RegExp("/"+l.entry+"$"),"/")}},k=C.events={flexible:function(e){var a=e.find("#"+h).hasClass(g);C.sideFlexible(a?"spread":null),C.resizeTable(350)},refresh:function(){layui.index.render()},serach:function(e){e.off("keypress").on("keypress",(function(a){if(this.value.replace(/\s/g,"")&&13===a.keyCode){var t=e.attr("lay-action"),i=e.attr("lay-text")||"搜索";t+=this.value,i=i+' <span style="color: #FF5722;">'+C.escape(this.value)+"</span>",location.hash=C.correctRouter(t),k.serach.keys||(k.serach.keys={}),k.serach.keys[C.tabsPage.index]=this.value,this.value===k.serach.keys[C.tabsPage.index]&&k.refresh(e),this.value=""}}))},message:function(e){e.find(".layui-badge-dot").remove()},theme:function(){C.popupRight({id:"LAY_adminPopupTheme",success:function(){s(this.id).render("system/theme")}})},note:function(e){var a=C.screen()<2,t=layui.data(l.tableName).note;k.note.index=C.popup({title:"便签",shade:0,offset:["41px",a?null:e.offset().left-250+"px"],anim:-1,id:"LAY_adminNote",skin:"layadmin-note layui-anim layui-anim-upbit",content:'<textarea placeholder="内容"></textarea>',resize:!1,success:function(e,a){var i=e.find("textarea"),n=void 0===t?"便签中的内容会存储在本地，这样即便你关掉了浏览器，在下次打开时，依然会读取到上一次的记录。是个非常小巧实用的本地备忘录":t;i.val(n).focus().on("keyup",(function(){layui.data(l.tableName,{key:"note",value:this.value})}))}})},fullscreen:function(e){var a="layui-icon-screen-full",t="layui-icon-screen-restore",i=e.children("i");i.hasClass(a)?(C.fullScreen(),i.addClass(t).removeClass(a)):(C.exitScreen(),i.addClass(a).removeClass(t))},about:function(){C.popupRight({id:"LAY_adminPopupAbout",success:function(){s(this.id).render("system/about")}})},more:function(){C.popupRight({id:"LAY_adminPopupMore",success:function(){s(this.id).render("system/more")}})},back:function(){history.back()},setTheme:function(e){var a=e.data("index");e.siblings(".layui-this").data("index");e.hasClass(y)||(e.addClass(y).siblings(".layui-this").removeClass(y),C.initTheme(a))},rollPage:function(e,a){var i=t("#LAY_app_tabsheader"),n=i.children("li"),l=(i.prop("scrollWidth"),i.outerWidth()),s=parseFloat(i.css("left"));if("left"===e){if(!s&&s<=0)return;var r=-s-l;n.each((function(e,a){var n=t(a).position().left;if(n>=r)return i.css("left",-n),!1}))}else"auto"===e?function(){var e,r=n.eq(a);if(r[0]){if((e=r.position().left)<-s)return i.css("left",-e);if(e+r.outerWidth()>=l-s){var o=e+r.outerWidth()-(l-s);n.each((function(e,a){var n=t(a).position().left;if(n+s>0&&n-s>o)return i.css("left",-n),!1}))}}}():n.each((function(e,a){var n=t(a),r=n.position().left;if(r+n.outerWidth()>=l-s)return i.css("left",-r),!1}))},leftPage:function(){k.rollPage("left")},rightPage:function(){k.rollPage()},closeThisTabs:function(){C.closeThisTabs()},closeOtherTabs:function(e){var a="LAY-system-pagetabs-remove";"all"===e?(t(z+":gt(0)").remove(),t(f).find("."+v+":gt(0)").remove()):(t(z).each((function(e,i){e&&e!=C.tabsPage.index&&(t(i).addClass(a),C.tabsBody(e).addClass(a))})),t("."+a).remove())},closeAllTabs:function(){k.closeOtherTabs("all"),location.hash=""},shade:function(){C.sideFlexible()}};(a=layui.data(l.tableName)).theme?C.theme(a.theme):l.theme&&C.initTheme(l.theme.initColorIndex),u.addClass("layui-layout-body"),C.screen()<1&&delete l.pageTabs,l.pageTabs||c.addClass("layadmin-tabspage-none"),r.ie&&r.ie<10&&s.error("IE"+r.ie+"下访问可能不佳，推荐使用：Chrome / Firefox / Edge 等高级浏览器",{offset:"auto",id:"LAY_errorIE"}),C.on("hash(side)",(function(e){var a,i,n=e.path,l=function(e){return{list:e.children(".layui-nav-child"),name:e.data("name"),jump:e.data("jump")}},s=t("#LAY-system-side-menu"),r="layui-nav-itemed";s.find("."+y).removeClass(y),C.screen()<2&&C.sideFlexible(),a=s.children("li"),i=C.correctRouter(n.join("/")),a.each((function(e,a){var s=t(a),o=l(s),u=o.list.children("dd"),c=n[0]==o.name||0===e&&!n[0]||o.jump&&i==C.correctRouter(o.jump);if(u.each((function(e,a){var s=t(a),u=l(s),c=u.list.children("dd"),d=n[0]==o.name&&n[1]==u.name||u.jump&&i==C.correctRouter(u.jump);if(c.each((function(e,a){var s=t(a),c=l(s);if(n[0]==o.name&&n[1]==u.name&&n[2]==c.name||c.jump&&i==C.correctRouter(c.jump)){var d=c.list[0]?r:y;return s.addClass(d).siblings().removeClass(d),!1}})),d){var m=u.list[0]?r:y;return s.addClass(m).siblings().removeClass(m),!1}})),c){var d=o.list[0]?r:y;return s.addClass(d).siblings().removeClass(d),!1}}))})),n.on("nav(layadmin-system-side-menu)",(function(e){e.siblings(".layui-nav-child")[0]&&c.hasClass(x)&&(C.sideFlexible("spread"),layer.close(e.data("index"))),C.tabsPage.type="nav"})),n.on("nav(layadmin-pagetabs-nav)",(function(e){var a=e.parent();a.removeClass(y),a.parent().removeClass(d)}));var F=function(e){var a=e.attr("lay-id"),t=e.attr("lay-attr"),i=e.index();location.hash=a===l.entry?"/":t||"/",C.tabsBodyChange(i)},z="#LAY_app_tabsheader>li";u.on("click",z,(function(){var e=t(this),a=e.index();if(C.tabsPage.type="tab",C.tabsPage.index=a,"iframe"===e.attr("lay-attr"))return C.tabsBodyChange(a);F(e),C.runResize(),C.resizeTable()})),n.on("tabDelete(layadmin-layout-tabs)",(function(e){var a=t(z+".layui-this");e.index&&C.tabsBody(e.index).remove(),F(a),C.delResize()})),u.on("click","*[lay-href]",(function(){var e=t(this),a=e.attr("lay-href");layui.router();C.tabsPage.elem=e,location.hash=C.correctRouter(a)})),u.on("click","*[layadmin-event]",(function(){var e=t(this),a=e.attr("layadmin-event");k[a]&&k[a].call(this,e)})),u.on("mouseenter","*[lay-tips]",(function(){var e=t(this);if(!e.parent().hasClass("layui-nav-item")||c.hasClass(x)){var a=e.attr("lay-tips"),i=e.attr("lay-offset"),n=e.attr("lay-direction"),l=layer.tips(a,this,{tips:n||1,time:-1,success:function(e,a){i&&e.css("margin-left",i+"px")}});e.data("index",l)}})).on("mouseleave","*[lay-tips]",(function(){layer.close(t(this).data("index"))}));var A=layui.data.resizeSystem=function(){layer.closeAll("tips"),A.lock||setTimeout((function(){C.sideFlexible(C.screen()<2?"":"spread"),delete A.lock}),100),A.lock=!0};o.on("resize",layui.data.resizeSystem),e("admin",C)}));